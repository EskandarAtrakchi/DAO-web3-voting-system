(()=>{var e={};e.id=104,e.ids=[104],e.modules={238:(e,s,t)=>{Promise.resolve().then(t.bind(t,3457))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},847:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var r=t(5781),a=t(7401);function n({className:e,...s}){return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...s})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3457:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5781),a=t(3072),n=t(8328),o=t.n(n),i=t(7439),l=t(9481),d=t(4238),c=t(4784),x=t(9173),u=t(847),m=t(9662),p=t(4348),h=t(7401),f=t(3583),v=t(8108),g=t(9252),j=t(8629);function b(){let e=Number((0,i.useParams)().id),{contract:s,address:t,isConnected:n,isOwner:b,isMember:N}=(0,m.$)(),[y,w]=(0,a.useState)(null),[A,C]=(0,a.useState)(!1),[k,P]=(0,a.useState)(!0),[D,E]=(0,a.useState)(!1),[_,F]=(0,a.useState)(!1),{toast:$}=(0,j.dj)();async function R(t){if(s&&n&&N)try{E(!0);let r=await s.vote(e,t);await r.wait(),$({title:"Vote Submitted",description:`You have successfully voted ${t?"for":"against"} this proposal`});let a=await s.getProposal(e);w({...y,votesFor:Number(a.votesFor),votesAgainst:Number(a.votesAgainst)}),C(!0)}catch(e){console.error("Error voting:",e),$({title:"Voting Failed",description:"There was an error submitting your vote",variant:"destructive"})}finally{E(!1)}}async function T(){if(s&&n&&b)try{F(!0);let t=await s.executeProposal(e);await t.wait(),$({title:"Proposal Executed",description:"The proposal has been successfully executed"}),w({...y,executed:!0})}catch(e){console.error("Error executing proposal:",e),$({title:"Execution Failed",description:"There was an error executing the proposal",variant:"destructive"})}finally{F(!1)}}return(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,r.jsx)(l.Navbar,{}),(0,r.jsxs)("main",{className:"flex-1 container mx-auto py-6 px-4 md:px-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(o(),{href:"/proposals",children:(0,r.jsxs)(d.$,{variant:"ghost",className:"gap-1 pl-0",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),"Back to Proposals"]})})}),(0,r.jsx)(p.ConnectWalletPrompt,{}),n?k?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(u.E,{className:"h-8 w-3/4"}),(0,r.jsx)(u.E,{className:"h-4 w-1/4"}),(0,r.jsx)(u.E,{className:"h-32 w-full"}),(0,r.jsx)(u.E,{className:"h-24 w-full"})]}):y?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:y.title}),(0,r.jsx)(x.E,{variant:y.executed?"outline":"default",className:"ml-2",children:(0,h.BX)(y.votingDeadline,y.executed)})]}),(0,r.jsxs)("div",{className:"flex gap-2 text-sm text-muted-foreground",children:[(0,r.jsx)(x.E,{variant:"outline",children:(0,h.A3)(y.proposalType)}),(0,r.jsxs)("span",{children:["Deadline: ",(0,h.Yq)(y.votingDeadline)]})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsxs)(c.aR,{children:[(0,r.jsx)(c.ZB,{children:"Description"}),(0,r.jsx)(c.BT,{children:y.shortDescription})]}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:y.detailedDescription})})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{children:"Voting Results"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,r.jsxs)("span",{className:"text-sm",children:["For: ",y.votesFor]}),(0,r.jsxs)("span",{className:"text-sm",children:["Against: ",y.votesAgainst]})]}),(0,r.jsxs)("div",{className:"flex gap-1 h-2",children:[(0,r.jsx)("div",{className:"bg-green-500 rounded-l-full",style:{width:`${y.votesFor+y.votesAgainst>0?y.votesFor/(y.votesFor+y.votesAgainst)*100:50}%`}}),(0,r.jsx)("div",{className:"bg-red-500 rounded-r-full",style:{width:`${y.votesFor+y.votesAgainst>0?y.votesAgainst/(y.votesFor+y.votesAgainst)*100:50}%`}})]})]}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:N?A?(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"You have already voted on this proposal"}):new Date>new Date(1e3*y.votingDeadline)?(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Voting period has ended"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.$,{onClick:()=>R(!0),disabled:D||!N,className:"flex-1 gap-1",children:[(0,r.jsx)(v.A,{className:"h-4 w-4"}),"Vote For"]}),(0,r.jsxs)(d.$,{onClick:()=>R(!1),variant:"outline",disabled:D||!N,className:"flex-1 gap-1",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),"Vote Against"]})]}):(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"You must be a member to vote on proposals"})}),b&&new Date>new Date(1e3*y.votingDeadline)&&!y.executed&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(d.$,{onClick:T,disabled:_,className:"w-full",children:"Execute Proposal"})})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Proposal Not Found"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"The proposal you are looking for does not exist"}),(0,r.jsx)(o(),{href:"/proposals",children:(0,r.jsx)(d.$,{children:"View All Proposals"})})]}):null]})]})}},3583:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(2752).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3873:e=>{"use strict";e.exports=require("path")},4238:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var r=t(5781),a=t(3072),n=t(11),o=t(7990),i=t(7401);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...o},d)=>{let c=a?n.DX:"button";return(0,r.jsx)(c,{className:(0,i.cn)(l({variant:s,size:t,className:e})),ref:d,...o})});d.displayName="Button"},4348:(e,s,t)=>{"use strict";t.d(s,{ConnectWalletPrompt:()=>l});var r=t(5781),a=t(9662),n=t(4238),o=t(4784),i=t(9215);function l(){let{isConnected:e,connectWallet:s,contract:t}=(0,a.$)();return e&&t?null:(0,r.jsxs)(o.Zp,{className:"mb-6",children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:e?"Contract Not Connected":"Connect Your Wallet"}),(0,r.jsx)(o.BT,{children:e?"Your wallet is connected, but the contract address is not properly configured.":"Connect your wallet to interact with the DAO voting system"})]}),(0,r.jsx)(o.Wu,{children:e?(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Please update the contract address in the web3-provider.tsx file with your deployed contract address."}):(0,r.jsxs)(n.$,{onClick:s,className:"gap-2",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),"Connect Wallet"]})})]})}},4784:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>o,aR:()=>i});var r=t(5781),a=t(3072),n=t(7401);let o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));o.displayName="Card";let i=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},5375:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(1129).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\eskan\\\\Downloads\\\\dao-voting (2)\\\\app\\\\proposals\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\eskan\\Downloads\\dao-voting (2)\\app\\proposals\\[id]\\page.tsx","default")},7287:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=t(7025),a=t(8198),n=t(2576),o=t.n(n),i=t(5239),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let d={children:["",{children:["proposals",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5375)),"C:\\Users\\eskan\\Downloads\\dao-voting (2)\\app\\proposals\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9650)),"C:\\Users\\eskan\\Downloads\\dao-voting (2)\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,4540,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,3117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,6874,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\eskan\\Downloads\\dao-voting (2)\\app\\proposals\\[id]\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/proposals/[id]/page",pathname:"/proposals/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8108:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(2752).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8614:(e,s,t)=>{Promise.resolve().then(t.bind(t,5375))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9173:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var r=t(5781);t(3072);var a=t(7990),n=t(7401);let o=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...t}){return(0,r.jsx)("div",{className:(0,n.cn)(o({variant:s}),e),...t})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9481:(e,s,t)=>{"use strict";t.d(s,{Navbar:()=>f});var r=t(5781),a=t(8328),n=t.n(a),o=t(7439),i=t(4238),l=t(9662),d=t(7401),c=t(2937),x=t(8902),u=t(9215),m=t(5456),p=t(7812),h=t(3075);function f(){let e=(0,o.usePathname)(),{address:s,connectWallet:t,disconnectWallet:a,isConnected:f}=(0,l.$)(),v=[{name:"Dashboard",href:"/",icon:(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"})},{name:"Proposals",href:"/proposals",icon:(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"})},{name:"Treasury",href:"/treasury",icon:(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"})},{name:"Members",href:"/members",icon:(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"})},{name:"About",href:"/about",icon:(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"})}];return(0,r.jsxs)("nav",{className:"border-b",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center px-4 md:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/",className:"font-bold text-xl",children:"DAO Voting"}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:v.map(s=>(0,r.jsxs)(n(),{href:s.href,className:`flex items-center text-sm font-medium transition-colors ${e===s.href?"text-primary":"text-muted-foreground hover:text-primary"}`,children:[s.icon,s.name]},s.href))})]}),(0,r.jsx)("div",{className:"ml-auto flex items-center space-x-4",children:f?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:(0,d.M0)(s)}),(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:a,className:"h-8 gap-1",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),"Disconnect"]})]}):(0,r.jsx)(i.$,{onClick:t,size:"sm",className:"h-8",children:"Connect Wallet"})})]}),(0,r.jsx)("div",{className:"md:hidden flex overflow-auto border-t",children:v.map(s=>(0,r.jsxs)(n(),{href:s.href,className:`flex flex-1 items-center justify-center py-2 text-sm font-medium transition-colors ${e===s.href?"bg-muted text-primary":"text-muted-foreground hover:text-primary"}`,children:[s.icon,(0,r.jsx)("span",{className:"sr-only",children:s.name})]},s.href))})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[579,341,274],()=>t(7287));module.exports=r})();