(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{900:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var r=t(8081),a=t(2149),n=t(7687);let i=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},1801:(e,s,t)=>{"use strict";t.d(s,{Navbar:()=>p});var r=t(8081),a=t(7950),n=t.n(a),i=t(9651),l=t(5160),d=t(8949),c=t(7687),o=t(4993),m=t(2544),u=t(2347),x=t(18),f=t(1794),h=t(1441);function p(){let e=(0,i.usePathname)(),{address:s,connectWallet:t,disconnectWallet:a,isConnected:p}=(0,d.$)(),j=[{name:"Dashboard",href:"/",icon:(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2"})},{name:"Proposals",href:"/proposals",icon:(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"})},{name:"Treasury",href:"/treasury",icon:(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"})},{name:"Members",href:"/members",icon:(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"})},{name:"About",href:"/about",icon:(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"})}];return(0,r.jsxs)("nav",{className:"border-b",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center px-4 md:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/",className:"font-bold text-xl",children:"DAO Voting"}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:j.map(s=>(0,r.jsxs)(n(),{href:s.href,className:"flex items-center text-sm font-medium transition-colors ".concat(e===s.href?"text-primary":"text-muted-foreground hover:text-primary"),children:[s.icon,s.name]},s.href))})]}),(0,r.jsx)("div",{className:"ml-auto flex items-center space-x-4",children:p?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:(0,c.M0)(s)}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:a,className:"h-8 gap-1",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),"Disconnect"]})]}):(0,r.jsx)(l.$,{onClick:t,size:"sm",className:"h-8",children:"Connect Wallet"})})]}),(0,r.jsx)("div",{className:"md:hidden flex overflow-auto border-t",children:j.map(s=>(0,r.jsxs)(n(),{href:s.href,className:"flex flex-1 items-center justify-center py-2 text-sm font-medium transition-colors ".concat(e===s.href?"bg-muted text-primary":"text-muted-foreground hover:text-primary"),children:[s.icon,(0,r.jsx)("span",{className:"sr-only",children:s.name})]},s.href))})]})}},2125:(e,s,t)=>{Promise.resolve().then(t.bind(t,6275))},3598:(e,s,t)=>{"use strict";t.d(s,{ConnectWalletPrompt:()=>d});var r=t(8081),a=t(8949),n=t(5160),i=t(6810),l=t(2347);function d(){let{isConnected:e,connectWallet:s,contract:t}=(0,a.$)();return e&&t?null:(0,r.jsxs)(i.Zp,{className:"mb-6",children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:e?"Contract Not Connected":"Connect Your Wallet"}),(0,r.jsx)(i.BT,{children:e?"Your wallet is connected, but the contract address is not properly configured.":"Connect your wallet to interact with the DAO voting system"})]}),(0,r.jsx)(i.Wu,{children:e?(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Please update the contract address in the web3-provider.tsx file with your deployed contract address."}):(0,r.jsxs)(n.$,{onClick:s,className:"gap-2",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),"Connect Wallet"]})})]})}},5160:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var r=t(8081),a=t(2149),n=t(5327),i=t(3484),l=t(7687);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:c=!1,...o}=e,m=c?n.DX:"button";return(0,r.jsx)(m,{className:(0,l.cn)(d({variant:a,size:i,className:t})),ref:s,...o})});c.displayName="Button"},6275:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(8081),a=t(2149),n=t(1801),i=t(6810),l=t(5160),d=t(900),c=t(8949),o=t(3598),m=t(7687),u=t(1215),x=t(166),f=t(3158),h=t(604),p=t(7101);function j(){let{contract:e,isConnected:s,isOwner:t,address:j,signer:b}=(0,c.$)(),[g,v]=(0,a.useState)({balance:BigInt(0),inflow:BigInt(0),outflow:BigInt(0)}),[y,N]=(0,a.useState)([]),[w,T]=(0,a.useState)(!0),[C,A]=(0,a.useState)(""),[k,E]=(0,a.useState)(""),[B,W]=(0,a.useState)(!1),[R,H]=(0,a.useState)(""),[D,S]=(0,a.useState)(!1),{toast:Z}=(0,u.dj)();async function F(r){if(r.preventDefault(),e&&s&&t)try{if(W(!0),!x.PW(k))throw Error("Invalid address");let s=f.g5(C),t=await e.withdraw(s,k);await t.wait(),Z({title:"Withdrawal Successful",description:"".concat(C," ETH has been sent to ").concat(k)});let r=await e.getTreasuryInfo();v({balance:r[0],inflow:r[1],outflow:r[2]}),A(""),E("")}catch(e){console.error("Error withdrawing funds:",e),Z({title:"Withdrawal Failed",description:"There was an error withdrawing funds",variant:"destructive"})}finally{W(!1)}}async function I(t){if(t.preventDefault(),b&&e&&s)try{S(!0);let s=f.g5(R),t=await e.getAddress(),r=await b.sendTransaction({to:t,value:s});await r.wait(),Z({title:"Deposit Successful",description:"".concat(R," ETH has been added to the treasury")});let a=await e.getTreasuryInfo();v({balance:a[0],inflow:a[1],outflow:a[2]});let n=(await e.getTreasuryHistory()).map(e=>({timestamp:Number(e.timestamp),balance:e.balance}));N(n),H("")}catch(e){console.error("Error depositing funds:",e),Z({title:"Deposit Failed",description:"There was an error adding funds to the treasury",variant:"destructive"})}finally{S(!1)}}return(0,a.useEffect)(()=>{(async function(){if(e&&s)try{T(!0);let s=await e.getTreasuryInfo();v({balance:s[0],inflow:s[1],outflow:s[2]});let t=(await e.getTreasuryHistory()).map(e=>({timestamp:Number(e.timestamp),balance:e.balance}));N(t)}catch(e){console.error("Error fetching treasury data:",e),Z({title:"Error",description:"Failed to load treasury data",variant:"destructive"})}finally{T(!1)}})()},[e,s,Z]),(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,r.jsx)(n.Navbar,{}),(0,r.jsxs)("main",{className:"flex-1 container mx-auto py-6 px-4 md:px-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Treasury"}),(0,r.jsx)(o.ConnectWalletPrompt,{}),s&&(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Treasury Overview"}),(0,r.jsx)(i.BT,{children:"Current financial status of the DAO"})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Current Balance"}),(0,r.jsxs)("p",{className:"text-3xl font-bold",children:[(0,m.ck)(g.balance)," ETH"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Inflow"}),(0,r.jsxs)("p",{className:"text-xl font-semibold text-green-500",children:[(0,m.ck)(g.inflow)," ETH"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Outflow"}),(0,r.jsxs)("p",{className:"text-xl font-semibold text-red-500",children:[(0,m.ck)(g.outflow)," ETH"]})]})]})]})})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Add Funds to Treasury"}),(0,r.jsx)(i.BT,{children:"Contribute ETH to the DAO treasury"})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"depositAmount",className:"text-sm font-medium",children:"Amount (ETH)"}),(0,r.jsx)(d.p,{id:"depositAmount",type:"number",step:"0.0000001",min:"0",value:R,onChange:e=>H(e.target.value),placeholder:"0.00",required:!0})]}),(0,r.jsxs)(l.$,{type:"submit",className:"w-full gap-1",disabled:D||!R,children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),D?"Processing...":"Deposit Funds"]})]})})]}),t&&(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Withdraw Funds"}),(0,r.jsx)(i.BT,{children:"Send funds from the treasury"})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"amount",className:"text-sm font-medium",children:"Amount (ETH)"}),(0,r.jsx)(d.p,{id:"amount",type:"number",step:"0.0000001",min:"0",value:C,onChange:e=>A(e.target.value),placeholder:"0.00",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"address",className:"text-sm font-medium",children:"Recipient Address"}),(0,r.jsx)(d.p,{id:"address",value:k,onChange:e=>E(e.target.value),placeholder:"0x...",required:!0})]}),(0,r.jsxs)(l.$,{type:"submit",className:"w-full gap-1",disabled:B||!C||!k,children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),B?"Processing...":"Withdraw"]})]})})]})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Treasury History"}),(0,r.jsx)(i.BT,{children:"Historical balance snapshots"})]}),(0,r.jsx)(i.Wu,{children:w?(0,r.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"Loading history..."}):0===y.length?(0,r.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No treasury history available"}):(0,r.jsx)("div",{className:"space-y-4",children:y.map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between border-b pb-2 last:border-0",children:[(0,r.jsx)("div",{className:"text-sm",children:(0,m.Yq)(e.timestamp)}),(0,r.jsxs)("div",{className:"font-medium",children:[(0,m.ck)(e.balance)," ETH"]})]},s))})})]})]})]})]})}},6810:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>l});var r=t(8081),a=t(2149),n=t(7687);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"}},e=>{var s=s=>e(e.s=s);e.O(0,[671,147,355,35,497,954,358],()=>s(2125)),_N_E=e.O()}]);