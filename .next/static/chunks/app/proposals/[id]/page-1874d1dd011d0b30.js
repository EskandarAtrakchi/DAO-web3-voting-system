(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{1251:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1018).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1801:(e,s,t)=>{"use strict";t.d(s,{Navbar:()=>p});var r=t(8081),a=t(7950),n=t.n(a),i=t(9651),o=t(5160),l=t(8949),c=t(7687),d=t(4993),m=t(2544),u=t(2347),x=t(18),h=t(1794),f=t(1441);function p(){let e=(0,i.usePathname)(),{address:s,connectWallet:t,disconnectWallet:a,isConnected:p}=(0,l.$)(),v=[{name:"Dashboard",href:"/",icon:(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"})},{name:"Proposals",href:"/proposals",icon:(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"})},{name:"Treasury",href:"/treasury",icon:(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"})},{name:"Members",href:"/members",icon:(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"})},{name:"About",href:"/about",icon:(0,r.jsx)(h.A,{className:"h-4 w-4 mr-2"})}];return(0,r.jsxs)("nav",{className:"border-b",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center px-4 md:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/",className:"font-bold text-xl",children:"DAO Voting"}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:v.map(s=>(0,r.jsxs)(n(),{href:s.href,className:"flex items-center text-sm font-medium transition-colors ".concat(e===s.href?"text-primary":"text-muted-foreground hover:text-primary"),children:[s.icon,s.name]},s.href))})]}),(0,r.jsx)("div",{className:"ml-auto flex items-center space-x-4",children:p?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:(0,c.M0)(s)}),(0,r.jsxs)(o.$,{variant:"outline",size:"sm",onClick:a,className:"h-8 gap-1",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),"Disconnect"]})]}):(0,r.jsx)(o.$,{onClick:t,size:"sm",className:"h-8",children:"Connect Wallet"})})]}),(0,r.jsx)("div",{className:"md:hidden flex overflow-auto border-t",children:v.map(s=>(0,r.jsxs)(n(),{href:s.href,className:"flex flex-1 items-center justify-center py-2 text-sm font-medium transition-colors ".concat(e===s.href?"bg-muted text-primary":"text-muted-foreground hover:text-primary"),children:[s.icon,(0,r.jsx)("span",{className:"sr-only",children:s.name})]},s.href))})]})}},2522:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1018).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2794:(e,s,t)=>{Promise.resolve().then(t.bind(t,3833))},3598:(e,s,t)=>{"use strict";t.d(s,{ConnectWalletPrompt:()=>l});var r=t(8081),a=t(8949),n=t(5160),i=t(6810),o=t(2347);function l(){let{isConnected:e,connectWallet:s,contract:t}=(0,a.$)();return e&&t?null:(0,r.jsxs)(i.Zp,{className:"mb-6",children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:e?"Contract Not Connected":"Connect Your Wallet"}),(0,r.jsx)(i.BT,{children:e?"Your wallet is connected, but the contract address is not properly configured.":"Connect your wallet to interact with the DAO voting system"})]}),(0,r.jsx)(i.Wu,{children:e?(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Please update the contract address in the web3-provider.tsx file with your deployed contract address."}):(0,r.jsxs)(n.$,{onClick:s,className:"gap-2",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),"Connect Wallet"]})})]})}},3833:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var r=t(8081),a=t(2149),n=t(7950),i=t.n(n),o=t(9651),l=t(1801),c=t(5160),d=t(6810),m=t(5977),u=t(8721),x=t(8949),h=t(3598),f=t(7687),p=t(1251),v=t(6722),g=t(2522),j=t(1215);function N(){let e=Number((0,o.useParams)().id),{contract:s,address:t,isConnected:n,isOwner:N,isMember:b}=(0,x.$)(),[y,w]=(0,a.useState)(null),[A,k]=(0,a.useState)(!1),[C,D]=(0,a.useState)(!0),[F,E]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1),{toast:T}=(0,j.dj)();async function $(t){if(s&&n&&b)try{E(!0);let r=await s.vote(e,t);await r.wait(),T({title:"Vote Submitted",description:"You have successfully voted ".concat(t?"for":"against"," this proposal")});let a=await s.getProposal(e);w({...y,votesFor:Number(a.votesFor),votesAgainst:Number(a.votesAgainst)}),k(!0)}catch(e){console.error("Error voting:",e),T({title:"Voting Failed",description:"There was an error submitting your vote",variant:"destructive"})}finally{E(!1)}}async function V(){if(s&&n&&N)try{R(!0);let t=await s.executeProposal(e);await t.wait(),T({title:"Proposal Executed",description:"The proposal has been successfully executed"}),w({...y,executed:!0})}catch(e){console.error("Error executing proposal:",e),T({title:"Execution Failed",description:"There was an error executing the proposal",variant:"destructive"})}finally{R(!1)}}return(0,a.useEffect)(()=>{(async function(){if(s&&n)try{D(!0);let r=await s.getProposal(e);if(w({id:Number(r.id),title:r.title,shortDescription:r.shortDescription,detailedDescription:r.detailedDescription,proposalType:Number(r.proposalType),votingDeadline:Number(r.votingDeadline),votesFor:Number(r.votesFor),votesAgainst:Number(r.votesAgainst),executed:r.executed}),t){let r=await s.hasVoted(e,t);k(r)}}catch(e){console.error("Error fetching proposal:",e),T({title:"Error",description:"Failed to load proposal details",variant:"destructive"})}finally{D(!1)}})()},[s,n,e,t,T]),(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,r.jsx)(l.Navbar,{}),(0,r.jsxs)("main",{className:"flex-1 container mx-auto py-6 px-4 md:px-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(i(),{href:"/proposals",children:(0,r.jsxs)(c.$,{variant:"ghost",className:"gap-1 pl-0",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),"Back to Proposals"]})})}),(0,r.jsx)(h.ConnectWalletPrompt,{}),n?C?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(u.E,{className:"h-8 w-3/4"}),(0,r.jsx)(u.E,{className:"h-4 w-1/4"}),(0,r.jsx)(u.E,{className:"h-32 w-full"}),(0,r.jsx)(u.E,{className:"h-24 w-full"})]}):y?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:y.title}),(0,r.jsx)(m.E,{variant:y.executed?"outline":"default",className:"ml-2",children:(0,f.BX)(y.votingDeadline,y.executed)})]}),(0,r.jsxs)("div",{className:"flex gap-2 text-sm text-muted-foreground",children:[(0,r.jsx)(m.E,{variant:"outline",children:(0,f.A3)(y.proposalType)}),(0,r.jsxs)("span",{children:["Deadline: ",(0,f.Yq)(y.votingDeadline)]})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Description"}),(0,r.jsx)(d.BT,{children:y.shortDescription})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:y.detailedDescription})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Voting Results"})}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,r.jsxs)("span",{className:"text-sm",children:["For: ",y.votesFor]}),(0,r.jsxs)("span",{className:"text-sm",children:["Against: ",y.votesAgainst]})]}),(0,r.jsxs)("div",{className:"flex gap-1 h-2",children:[(0,r.jsx)("div",{className:"bg-green-500 rounded-l-full",style:{width:"".concat(y.votesFor+y.votesAgainst>0?y.votesFor/(y.votesFor+y.votesAgainst)*100:50,"%")}}),(0,r.jsx)("div",{className:"bg-red-500 rounded-r-full",style:{width:"".concat(y.votesFor+y.votesAgainst>0?y.votesAgainst/(y.votesFor+y.votesAgainst)*100:50,"%")}})]})]}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:b?A?(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"You have already voted on this proposal"}):new Date>new Date(1e3*y.votingDeadline)?(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Voting period has ended"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{onClick:()=>$(!0),disabled:F||!b,className:"flex-1 gap-1",children:[(0,r.jsx)(v.A,{className:"h-4 w-4"}),"Vote For"]}),(0,r.jsxs)(c.$,{onClick:()=>$(!1),variant:"outline",disabled:F||!b,className:"flex-1 gap-1",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),"Vote Against"]})]}):(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"You must be a member to vote on proposals"})}),N&&new Date>new Date(1e3*y.votingDeadline)&&!y.executed&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(c.$,{onClick:V,disabled:P,className:"w-full",children:"Execute Proposal"})})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Proposal Not Found"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"The proposal you are looking for does not exist"}),(0,r.jsx)(i(),{href:"/proposals",children:(0,r.jsx)(c.$,{children:"View All Proposals"})})]}):null]})]})}},5160:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var r=t(8081),a=t(2149),n=t(5327),i=t(3484),o=t(7687);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(l({variant:a,size:i,className:t})),ref:s,...d})});c.displayName="Button"},5977:(e,s,t)=>{"use strict";t.d(s,{E:()=>o});var r=t(8081);t(2149);var a=t(3484),n=t(7687);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...a})}},6722:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1018).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6810:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o});var r=t(8081),a=t(2149),n=t(7687);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},8721:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var r=t(8081),a=t(7687);function n(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",s),...t})}}},e=>{var s=s=>e(e.s=s);e.O(0,[671,147,35,497,954,358],()=>s(2794)),_N_E=e.O()}]);